<% content_for :head do %>
  <%= javascript_include_tag 'admin_safety', defer: true %>
<% end %>

<div class="d-flex justify-content-between align-items-center mb-4">
  <h2>Edit User: <%= @user.full_name %></h2>
  <div>
    <%= link_to "View User", admin_user_path(@user), class: "btn btn-info me-2" %>
    <%= link_to "Back to Users", admin_users_path, class: "btn btn-outline-secondary" %>
  </div>
</div>

<!-- Add user data for JavaScript -->
<% content_for :body_data do %>
  data-current-user-email="<%= current_user.email %>" 
  data-edit-user-email="<%= @user.email %>"
<% end %>

<%= render 'form', user: @user %>

<div class="mt-4 text-center">
  <% unless @user == current_user %>
    <%= link_to "Delete User", admin_user_path(@user), method: :delete, 
                confirm: "Are you sure? This will remove the user from all events.", 
                class: "btn btn-danger" %>
  <% else %>
    <p class="text-muted">You cannot delete your own account.</p>
  <% end %>
</div>
