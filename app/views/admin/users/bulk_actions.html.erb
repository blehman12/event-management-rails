<div class="d-flex justify-content-between align-items-center mb-4">
  <h2>Bulk User Actions</h2>
  <div>
    <%= link_to "Back to Users", admin_users_path, class: "btn btn-outline-secondary" %>
  </div>
</div>

<div class="card">
  <div class="card-header">
    <h5>Select Users for Bulk Operations</h5>
  </div>
  <div class="card-body">
    <%= form_with url: bulk_invite_admin_users_path, method: :post, local: true do |f| %>
      <div class="table-responsive">
        <table class="table table-striped">
          <thead>
            <tr>
              <th><input type="checkbox" id="select-all"></th>
              <th>Name</th>
              <th>Email</th>
              <th>Company</th>
              <th>Role</th>
            </tr>
          </thead>
          <tbody>
            <% @users.each do |user| %>
              <tr>
                <td><%= check_box_tag "user_ids[]", user.id, false, class: "user-checkbox" %></td>
                <td><%= user.first_name %> <%= user.last_name %></td>
                <td><%= user.email %></td>
                <td><%= user.company %></td>
                <td><%= user.role.humanize %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
      
      <div class="mt-3">
        <%= f.submit "Send Invitations", class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
</div>

<script>
document.getElementById('select-all').addEventListener('change', function() {
  const checkboxes = document.querySelectorAll('.user-checkbox');
  checkboxes.forEach(checkbox => {
    checkbox.checked = this.checked;
  });
});
</script>